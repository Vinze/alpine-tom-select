<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/tom-select@2.2.2/dist/css/tom-select.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/tom-select@2.2.2/dist/js/tom-select.complete.min.js"></script>
    <style>
        .ts-wrapper {
            position: relative;
        }
        .ts-control::after {
            position: absolute;
            top: 6px;
            right: 6px;
            content: 'â€º';
            font-size: 24px;
            /* font-weight: bold; */
            transform: rotate(90deg);
            line-height: 20px;
            width: 24px;
            height: 24px;
            text-align: center;
            transition: transform .25s;
        }
        .dropdown-active .ts-control::after {
            transform: rotate(270deg);
        }
    </style>
    <title>Tom Select Alpine</title>
</head>
<body class="bg-slate-700">
    <div class="mx-auto my-8 max-w-2xl bg-gray-100 p-4 shadow">
        <p class="mb-4">Tom Select is a dynamic, framework agnostic, and lightweight (~16kb gzipped) select UI control. With autocomplete and native-feeling keyboard navigation, it's useful for tagging, contact lists, country selectors, and so on. Tom Select was forked from selectize.js with four main objectives: modernizing the code base, decoupling from jQuery, expanding functionality, and addressing issue backlogs.</p>
        <p class="mb-4">
            Visit the docs at: <a href="https://tom-select.js.org/" class="text-sky-700">https://tom-select.js.org/</a>
        </p>

        <div x-data="{
            element: null,
            multiple: false,
            value: 1,
            options: [
                { value: 1, text: 'Elsie West' },
                { value: 2, text: 'Chloe-Louise Philip' },
                { value: 3, text: 'Ezra Mcdonnell' },
                { value: 4, text: 'Kelsea Sanford' },
                { value: 5, text: 'Blessing Dunne' },
                { value: 6, text: 'Kristy Hulme' },
                { value: 7, text: 'Adeline Phan' },
                { value: 8, text: 'Yannis Avery' },
                { value: 9, text: 'Derren Delacruz' },
                { value: 10, text: 'Hayleigh Faulkner' },
                { value: 11, text: 'Pawel Horton' },
                { value: 12, text: 'Hasnain Seymour' },
                { value: 13, text: 'Masuma Madden' },
                { value: 14, text: 'Jeffery Hartman' },
                { value: 15, text: 'Taya Stark' },
                { value: 16, text: 'Nieve Berg' },
                { value: 17, text: 'Levison Brown' },
                { value: 18, text: 'Mallory Chang' },
                { value: 19, text: 'Tiarna Gomez' },
                { value: 20, text: 'Billy Wright' },
                { value: 21, text: 'Anastasia Oneal' },
                { value: 22, text: 'Vlad Carson' },
                { value: 23, text: 'Romana Parker' },
                { value: 24, text: 'Jorja Lambert' },
                { value: 25, text: 'Jordon Case' },
                { value: 26, text: 'Elyas Lucero' },
                { value: 27, text: 'Koby French' },
                { value: 28, text: 'Tevin Thompson' },
                { value: 30, text: 'Karishma Farmer' },
                { value: 31, text: 'Justin Trejo' },
                { value: 32, text: 'Kirk Stein' },
                { value: 33, text: 'Mila-Rose Shea' },
                { value: 34, text: 'Bryony Finch' },
                { value: 35, text: 'Jamie-Lee Sanders' },
                { value: 36, text: 'Arjun Harmon' },
                { value: 37, text: 'Danish Hackett' },
                { value: 38, text: 'Andrei Warner' },
                { value: 39, text: 'Brendon Ryan' },
                { value: 40, text: 'Aasiyah Knapp' }
            ],
            addOption() {
                this.element.addOption({ value: 41, text: 'Vincent Bremer' });
            },
            selectOption() {
                this.element.setValue(41);
            },
            removeOption() {
                this.element.removeOption(41);
            },
            replaceOptions() {
                this.element.clear();
                this.element.clearOptions();

                this.element.addOptions([
                    { value: 'volvo', text: 'Volvo' },
                    { value: 'vw', text: 'VW' },
                    { value: 'peugeot', text: 'Peugeot' },
                    { value: 'tesla', text: 'Tesla' },
                    { value: 'bmw', text: 'BMW' },
                ])
            },
            init() {
                this.$nextTick(() => {
                    this.element = new TomSelect(this.$refs.select, {
                        maxOptions: null,
                    })

                    this.element.addOptions(this.options);

                    // tomselect.addOption({ value: 41, text: 'Vincent Bremer' });

                    this.element.on('change', (value) => {
                        this.value = value;
                    })

                    // let refreshChoices = () => {
                    //     let selection = this.multiple ? this.value : [this.value]

                    //     choices.clearStore()
                    //     choices.setChoices(this.options.map(({ value, label }) => ({
                    //         value,
                    //         label,
                    //         selected: selection.includes(value),
                    //     })))
                    // }

                    // refreshChoices()

                    // this.$refs.select.addEventListener('change', () => {
                    //     this.value = choices.getValue(true)
                    // })

                    // this.$watch('value', () => refreshChoices())
                    // this.$watch('options', () => refreshChoices())
                })
            }
            }">

            <div class="flex items-center gap-4 mt-4">
                <label for="" class="w-1/3">
                    Select something:
                </label>
                <select x-ref="select" :multiple="multiple" class="w-2/3"></select>
            </div>
            <div class="flex items-center gap-4 my-4">
                <div class="w-1/3">Selected:</div>
                <div x-text="value" class="w-2/3"></div>
            </div>
            <div class="mt-4 grid grid-cols-4 gap-4">
                <button @click="addOption()" class="block w-full p-2 bg-slate-500 text-white rounded">Add myself</button>
                <button @click="selectOption()" class="block w-full p-2 bg-slate-500 text-white rounded">Select myself</button>
                <button @click="removeOption()" class="block w-full p-2 bg-slate-500 text-white rounded">Remove myself</button>
                <button @click="replaceOptions()" class="block w-full p-2 bg-slate-500 text-white rounded">Replace all</button>
            </div>
        </div>
    </div>
</body>
</html>